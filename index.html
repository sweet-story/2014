
<!doctype html>
<!--[if IE 9]><html class="lt-ie10" lang="en" > <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>!local - Foundation Template | Store</title>
<meta name="description" content="Documentation and reference library for ZURB Foundation. JavaScript, CSS, components, grid and more."/>
<meta name="author" content="ZURB, inc. ZURB network also includes zurb.com"/>

<!-- // JS -->
<script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.js"></script>
<script src="assets/js/underscore-min.js"></script>


<meta name="copyright" content="ZURB, inc. Copyright (c) 2014"/>
<link rel="stylesheet" href="assets/css/foundation.css"/>
<link rel="stylesheet" href="assets/css/custom.css"/>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
<script src="assets/js/modernizr.js"></script>
</head>
<body>
<div class='thetop'></div>
<div class="row">
<div class="large-12 columns">
 
<div class="row">
<div class="large-12 columns">

<nav class="top-bar" data-topbar role="navigation">
  <ul class="title-area">
    <li class="name">
      <h1><a href="#">My Site</a></h1>
    </li>
     <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone -->
    <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
  </ul>

  <section class="top-bar-section">
    <!-- Right Nav Section -->
    <ul class="right">
      <li class="active" id="top"><a href="#/top">Популярные</a></li>
      <li id="cheap"><a href="#/cheap">От дешевых</a></li>
      <li id="expensive"><a href="#/expensive">От дорогих</a></li>
      <li id="weight"><a href="#/weight">От тяжелых</a></li>
    </ul>

    <!-- <dl class="sub-nav right">
      <dt>Filter:</dt>
      <dd class="active"><a href="#">All</a></dd>
      <dd><a href="#">Active</a></dd>
      <dd><a href="#">Pending</a></dd>
      <dd><a href="#">Suspended</a></dd>
    </dl> -->

    <!-- Left Nav Section -->
    <ul class="left">
      <li><a href="#">Left Nav Button</a></li>
    </ul>
  </section>
</nav>

</div>
</div> 
<div class="row">
 
<!-- <div class="large-4 small-12 columns">
<img src="http://placehold.it/500x500&amp;text=Logo">
<div class="hide-for-small panel">
<h3>Header</h3>
<h5 class="subheader">Risus ligula, aliquam nec fermentum vitae, sollicitudin eget urna. Donec dignissim
nibh fermentum odio ornare sagittis.</h5>
</div><a href="#">
<div class="panel callout radius">
<h6>99&nbsp; items in your cart</h6>
</div></a>
</div>  -->
 
<div class="large-12 columns">

<div class="row" id="main_view">



</div> 
 
<!-- <div class="row">
  <div class="small-5 small-push-7 medium-7 medium-push-5 columns"><img src="http://placehold.it/300x300&amp;text=Site%20Owner"></div>
  <div class="small-7 small-pull-5 medium-5 medium-pull-7 columns"><img src="http://placehold.it/300x300&amp;text=Site%20Owner"></div>
</div>
<div class="row">
  <div class="small-2 large-4 columns">
    Поклади в нього
такі цукерочки:
«АВК» Бурундучок».................................................3 шт
«Аромат сонця».....................................................2 шт
«Весняна гостя».......................................................2 шт
«Emilio» смак англійський тоффі»............1 шт
«Emilio» смак крем-вершки»............................1 шт
«Emilio» смак шоколад з молоком»...........1 шт
«Королівський шарм» з мигдальною начинкою...1 шт
ВСЬОГО..................................................11 шт
  </div>
  <div class="small-4 large-4 columns">...</div>
  <div class="small-6 large-4 columns">...</div>
</div> -->

<div class="row">
<div class="large-12 columns">
<div class="panel">
<div class="row">
<div class="large-2 small-6 columns"><img src="http://placehold.it/300x300&amp;text=Site%20Owner"></div>
<div class="large-10 small-6 columns">
<strong>This Site Is Managed By</strong>
<hr>
Risus ligula, aliquam nec fermentum vitae, sollicitudin eget urna. Donec dignissim nibh fermentum
odio ornare sagittis
</div>
</div>
</div>
</div> 
</div>
</div>
</div> 
<footer class="row">
<div class="large-12 columns">
<hr>
<div class="row">
<div class="large-6 columns">
<p>© Copyright no one at all. Go to town.</p>
</div>
<div class="large-6 columns">
<ul class="inline-list right">
<li>
<a href="#">Link 1</a>
</li>
<li>
<a href="#">Link 2</a>
</li>
<li>
<a href="#">Link 3</a>
</li>
<li>
<a href="#">Link 4</a>
</li>
</ul>
</div>
</div>
</div>
</footer> 
</div>
</div>


<div class='scrolltop'>
    <div class='scroll icon'><i class="fa fa-4x fa-angle-up"></i></div>
</div>



<div id="background-wallpaper"></div>

<script src="assets/js/jquery.js"></script>
<script src="assets/js/foundation.min.js"></script>


<script>
      $(document).foundation();

      var doc = document.documentElement;
      doc.setAttribute('data-useragent', navigator.userAgent);
    </script>
</body>
</html>



<script id="items-template" type="text/x-handlebars-template">
{{#each [kit]}}
  {{#if @last}}
        <div class="large-4 small-6 columns end">
    {{else}}
        <div class="large-4 small-6 columns">
    {{/if}}
  
  
    <a href="#/id/{{id}}"><img src={{url}}></a>
    <div class="panel">
      <h5>{{item_name}}</h5>
      <h6 class="subheader">{{price}} грн.</h6>
      <h6 class="subheader">{{weight}} грамм.</h6>
    </div>

  </div>
{{/each}}
</script>

<script id="item-template" type="text/x-handlebars-template">

{{#each [kit]}}  
    <div class="large-6 columns">
      <img src="http://placehold.it/500x500&amp;text=Thumbnail"/>
    </div>
    <div class="large-6 columns">
      <ul class="pricing-table">
        <li class="title">Standard</li>
        <li class="price">{{price}} грн.</li>
        <li class="description">An awesome description</li>
        <li class="bullet-item">Бштзге</li>
        <li class="bullet-item">Бштзге</li>
        <li class="bullet-item">Бштзге</li>
        <li class="bullet-item">5GB Storage</li>
        <li class="bullet-item">20 Users</li>
        <li class="cta-button"><a class="button" href="#">Buy Now</a><span></span><a class="button" href="#">Buy Now</a></li>
      </ul>
    </div>
{{/each}}
    <div class="large-12 columns">
    <table>
  <thead>
    <tr>
      <th width="200">Table Header</th>
      <th>Table Header</th>
      <th width="150">Table Header</th>
      <th width="150">Table Header</th>
    </tr>
  </thead>
  <tbody>
    {{#each [candies]}}
    <tr>
      <td><img src={{url}}/></td>
      <td>{{item_name}}</td>
      <td>Content Goes Here</td>
      <td>Content Goes Here</td>
    </tr>
    {{/each}}
    </tbody>
</table>
</div>
  
  
    

</script>

<script>

 (function( App, $, undefined ) {

  App.init = function () {

    var Router = new App.Router();
    Router.onChange();
      
    $(window).on("hashchange", function () {
      
      console.log("route was changed");
      Router.onChange();

    });

  };

  App.Router = function () {

  var routes = ["cheap", "expensive", "weight", "top", "id"];

  this.isAllowed = function (route) {

          var result = routes.indexOf(route) > -1 ? true : false;
          return result;
        };

    this.navigate = function (route, id) {
      console.log(route);
      if(this.isAllowed(route)) {

        var View = new App.View(), Data = new App.Data();

        switch (route) {
          case "id": 
            console.log("route is "+route);
            var id = isNaN(parseInt(id)) ? 1 : parseInt(id);
            var data = Data.sortBy(route, id);
            console.log(data);
            if(data.sys.status !== "error") {
              View.render(View.templates.item, Data.sortBy(route, id), View.views.main);
              console.log(Data.sortBy(route, id));
            } else {
              window.location.hash = "/top";
            }
            break;

          default: 
            console.log("route is "+route);
            console.log("view is ");
            console.log(View);
            View.render(View.templates.items, Data.sortBy(route), View.views.main);
            $(View.views.top_bar).removeClass();
            $("#"+route).addClass("active");
        };

      };

    };

    this.onChange = function () {

        var url = location.hash || "#/top", // todo alternate URL must be "/"
            route = url.match(/(\w+)/gi)[0],
            id = url.match(/(\w+)/gi)[1];
            console.log(route);
            this.navigate(route, id);
    };


  };

  App.View = function () {

    this.views = {
      main: "#main_view",
      top_bar: ".top-bar-section ul li"
    }
    this.templates = {

      item: $("#item-template").html(),
      items: $("#items-template").html()
      
    };

    this.render = function (source, data, view) {

      console.log("render started");
      var template = Handlebars.compile(source),
          html = template(data);
      console.log(template, html, view);
      $(view).html(html);
      window.scroll(0,0);
    };
  };


  App.Data = function () {

    var storage = function () {

      return { kit: [
        {item_name: "App template 0", id: 1, contain: [1,3,6], price: 25.5, url: "http://placehold.it/500x500&amp;text=Thumbnail", weight: 122},
        {item_name: "App template 1", id: 2, contain: [3,9], price: 100, url: "http://dummyimage.com/500.png/09f/fff",  weight: 950},
        {item_name: "App template 2", id: 3, price: 45, url: "http://dummyimage.com/500.png/f9f/000",  weight: 350},
        {item_name: "App template 3", id: 4, price: 38, url: "http://dummyimage.com/500.png/f95/000",  weight: 220},
        {item_name: "App template 1", id: 5, price: 100, url: "http://dummyimage.com/500.png/f15/000",  weight: 950},
        {item_name: "App template 2", id: 6, price: 27, url: "http://dummyimage.com/500.png/115/fff",  weight: 180},
        {item_name: "App template 1", id: 7, price: 109, url: "http://dummyimage.com/500.png/41f/fff",  weight: 840},
        {item_name: "App template 2", id: 8, price: 41, url: "http://dummyimage.com/500.png/ff0f/000",  weight: 418},
        {item_name: "App template 1", id: 9, price: 49, url: "http://dummyimage.com/500.png/0f9/fff",  weight: 567},
        {item_name: "App template 2", id: 10, price: 62, url: "http://dummyimage.com/500.png/099/fff",  weight: 710},
        {item_name: "App template 1", id: 11, price: 46, url: "http://dummyimage.com/500.png/819/fff",  weight: 380},
        {item_name: "App template 2", id: 12, price: 55, url: "http://dummyimage.com/500.png/810/fff",  weight: 412},
        {item_name: "App template 1", id: 13, price: 12, url: "http://dummyimage.com/500.png/159/fff",  weight: 67},
        {item_name: "App template 2", id: 14, price: 131, url: "http://dummyimage.com/500.png/905/fff",  weight: 1012}

      ],
              candies: [
        {item_name: "Candy 0", id: 1, url: "http://placehold.it/250x250&amp;text=Thumbnail", weight: 122},
        {item_name: "Candy 1", id: 2, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 950},
        {item_name: "Candy 1", id: 3, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 1000},
        {item_name: "Candy 1", id: 4, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 220},
        {item_name: "Candy 1", id: 5, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 690},
        {item_name: "Candy 1", id: 6, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 456},
        {item_name: "Candy 1", id: 7, url: "http://placehold.it/250x250&amp;text=Thumbnail",  weight: 239}

      ]};
    };

    var tmp = {};

    var sorters = {

          expensive: function () {
            tmp["kit"] = storage()["kit"].sort(function (a, b) { return b.price - a.price; });
            tmp.sys = {status: "success"};
            return tmp;
            // return App.Data.storage()["kit"].sort(function (a, b) { return b.price - a.price; });
          },

          cheap: function () {
            tmp["kit"] = storage()["kit"].sort(function (a, b) { return b.price - a.price; }).reverse();
            tmp.sys = {status: "success"};
            return tmp;
            // return sorters.expensive().reverse(); 
          },

          weight: function () {
            tmp["kit"] = storage()["kit"].sort(function (a, b) { return b.weight - a.weight; });
            tmp.sys = {status: "success"};
            return tmp;
            // return App.Data.storage()["kit"].sort(function (a, b) { return b.weight - a.weight; });
          },

          top: function () { 

            console.log("sorter top started");
            // return App.Data.storage()["kit"].filter(function (a) { return a.price > 40; });}
            tmp["kit"] = storage()["kit"].filter(function (a) { return a.price > 40; });
            tmp.sys = {status: "success"};
            return tmp;
          },

          id: function (id) {

            try {

              tmp["kit"] = storage()["kit"].filter(function (o) { return o.id === id });
              console.log("id is: "+typeof id, id);
              tmp["candies"] = storage()["candies"].filter(function (o) { return tmp["kit"][0]["contain"].indexOf(o.id) > -1});
              tmp.sys = {status: "success"};
              return tmp;

            } catch (err) {

              // todo
              //App.Router.set_url("/top");
              
              console.log(err);
              return {sys:{status: "error", descr: "no data for such ID"}};
            }
            
  

          }

    };

    this.sortBy = function (sort_type, id) {

        console.log("sort_type: "+sort_type);
        console.log(sorters[sort_type](id));
        return sorters[sort_type](id);
    };

};

}( window.App = window.App || {}, jQuery ));


  



</script>

<script>
    $(function () {
      
      App.init();
    });

</script>




<script>

$(window).scroll(function() {
    if ($(this).scrollTop() > 50 ) {
        $('.scrolltop:hidden').stop(true, true).fadeIn();
    } else {
        $('.scrolltop').stop(true, true).fadeOut();
    }
});
$(function(){$(".scroll").click(function(){$("html,body").animate({scrollTop:$(".thetop").offset().top},"1000");return false})})


</script>